{"ast":null,"code":"import { useRef } from \"react\";\nexport function useValidationFunctionAsync(asyncValidator, onAsyncValidation) {\n  var validationMsg = useRef(undefined);\n  var timestampAsyncFunc = useRef(null);\n  var validationFN = useRef(function (value) {\n    var newValue = value === undefined ? \"\" : value;\n    var timestamp = Date.now();\n    timestampAsyncFunc.current = timestamp;\n    onAsyncValidation({\n      status: \"asyncStart\"\n    });\n    return new Promise(function (resolve, reject) {\n      asyncValidator(newValue).then(function (value) {\n        if (timestampAsyncFunc.current === timestamp) {\n          validationMsg.current = value;\n          onAsyncValidation({\n            status: \"asyncSuccess\",\n            value: value\n          });\n          resolve(value);\n        } else {\n          reject(\"cancelled\");\n        }\n      }).catch(function (value) {\n        if (timestampAsyncFunc.current === timestamp) {\n          validationMsg.current = value;\n          onAsyncValidation({\n            status: \"asyncError\",\n            value: value\n          });\n          reject(value);\n        } else {\n          reject(\"cancelled\");\n        }\n      });\n    });\n  });\n  return [validationFN];\n}","map":{"version":3,"names":["useRef","useValidationFunctionAsync","asyncValidator","onAsyncValidation","validationMsg","undefined","timestampAsyncFunc","validationFN","value","newValue","timestamp","Date","now","current","status","Promise","resolve","reject","then","catch"],"sources":["/home/micqdf/AlpacaPunchTests/maintest/test1/client/node_modules/usetheform/build/es/hooks/commons/useValidationFunctionAsync.js"],"sourcesContent":["import { useRef } from \"react\";\nexport function useValidationFunctionAsync(asyncValidator, onAsyncValidation) {\n  var validationMsg = useRef(undefined);\n  var timestampAsyncFunc = useRef(null);\n  var validationFN = useRef(function (value) {\n    var newValue = value === undefined ? \"\" : value;\n    var timestamp = Date.now();\n    timestampAsyncFunc.current = timestamp;\n    onAsyncValidation({\n      status: \"asyncStart\"\n    });\n    return new Promise(function (resolve, reject) {\n      asyncValidator(newValue).then(function (value) {\n        if (timestampAsyncFunc.current === timestamp) {\n          validationMsg.current = value;\n          onAsyncValidation({\n            status: \"asyncSuccess\",\n            value: value\n          });\n          resolve(value);\n        } else {\n          reject(\"cancelled\");\n        }\n      }).catch(function (value) {\n        if (timestampAsyncFunc.current === timestamp) {\n          validationMsg.current = value;\n          onAsyncValidation({\n            status: \"asyncError\",\n            value: value\n          });\n          reject(value);\n        } else {\n          reject(\"cancelled\");\n        }\n      });\n    });\n  });\n  return [validationFN];\n}"],"mappings":"AAAA,SAASA,MAAT,QAAuB,OAAvB;AACA,OAAO,SAASC,0BAAT,CAAoCC,cAApC,EAAoDC,iBAApD,EAAuE;EAC5E,IAAIC,aAAa,GAAGJ,MAAM,CAACK,SAAD,CAA1B;EACA,IAAIC,kBAAkB,GAAGN,MAAM,CAAC,IAAD,CAA/B;EACA,IAAIO,YAAY,GAAGP,MAAM,CAAC,UAAUQ,KAAV,EAAiB;IACzC,IAAIC,QAAQ,GAAGD,KAAK,KAAKH,SAAV,GAAsB,EAAtB,GAA2BG,KAA1C;IACA,IAAIE,SAAS,GAAGC,IAAI,CAACC,GAAL,EAAhB;IACAN,kBAAkB,CAACO,OAAnB,GAA6BH,SAA7B;IACAP,iBAAiB,CAAC;MAChBW,MAAM,EAAE;IADQ,CAAD,CAAjB;IAGA,OAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;MAC5Cf,cAAc,CAACO,QAAD,CAAd,CAAyBS,IAAzB,CAA8B,UAAUV,KAAV,EAAiB;QAC7C,IAAIF,kBAAkB,CAACO,OAAnB,KAA+BH,SAAnC,EAA8C;UAC5CN,aAAa,CAACS,OAAd,GAAwBL,KAAxB;UACAL,iBAAiB,CAAC;YAChBW,MAAM,EAAE,cADQ;YAEhBN,KAAK,EAAEA;UAFS,CAAD,CAAjB;UAIAQ,OAAO,CAACR,KAAD,CAAP;QACD,CAPD,MAOO;UACLS,MAAM,CAAC,WAAD,CAAN;QACD;MACF,CAXD,EAWGE,KAXH,CAWS,UAAUX,KAAV,EAAiB;QACxB,IAAIF,kBAAkB,CAACO,OAAnB,KAA+BH,SAAnC,EAA8C;UAC5CN,aAAa,CAACS,OAAd,GAAwBL,KAAxB;UACAL,iBAAiB,CAAC;YAChBW,MAAM,EAAE,YADQ;YAEhBN,KAAK,EAAEA;UAFS,CAAD,CAAjB;UAIAS,MAAM,CAACT,KAAD,CAAN;QACD,CAPD,MAOO;UACLS,MAAM,CAAC,WAAD,CAAN;QACD;MACF,CAtBD;IAuBD,CAxBM,CAAP;EAyBD,CAhCwB,CAAzB;EAiCA,OAAO,CAACV,YAAD,CAAP;AACD"},"metadata":{},"sourceType":"module"}