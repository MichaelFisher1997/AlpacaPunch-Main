{"ast":null,"code":"import { STATUS, FORM_VALIDATION_LABEL } from \"./constants\";\nexport var createForm = function createForm(state) {\n  if (state === void 0) {\n    state = {};\n  }\n\n  return {\n    state: state,\n    isValid: true,\n    status: STATUS.READY,\n    pristine: true,\n    isSubmitting: false,\n    submitAttempts: 0,\n    submitted: 0\n  };\n};\nexport var getValueByPath = function getValueByPath(path, obj, separator) {\n  if (separator === void 0) {\n    separator = \"/\";\n  }\n\n  if (path === FORM_VALIDATION_LABEL) {\n    return obj;\n  }\n\n  var properties = Array.isArray(path) ? path : path.split(separator);\n  return properties.reduce(function (prev, curr) {\n    return prev && prev[curr];\n  }, obj);\n};\nexport var isFormValid = function isFormValid(validators, state) {\n  return Object.keys(validators).reduce(function (acc, key) {\n    var value = getValueByPath(key, state);\n    return validators[key](value, state) && acc;\n  }, true);\n};\nexport var isFormValidAsync = function isFormValidAsync(validatorsAsync) {\n  return Object.keys(validatorsAsync).filter(function (key) {\n    return validatorsAsync[key].type === \"field\";\n  }).every(function (key) {\n    var _validatorsAsync$key = validatorsAsync[key],\n        counter = _validatorsAsync$key.counter,\n        isValid = _validatorsAsync$key.isValid;\n    return counter === 1 && isValid;\n  });\n};\nexport var generateAsynFuncs = function generateAsynFuncs(validators, validatorsMaps, state, updateValidatorsMap) {\n  return Object.keys(validators).filter(function (key) {\n    var _validatorsMaps$key = validatorsMaps[key],\n        type = _validatorsMaps$key.type,\n        isValid = _validatorsMaps$key.isValid,\n        counter = _validatorsMaps$key.counter;\n    return counter === 0 && !isValid && type === \"field\" || type === \"collection\";\n  }).map(function (key) {\n    var value = getValueByPath(key, state);\n    return validators[key](value, state).then(function (value) {\n      updateValidatorsMap(key, true, 1);\n      return value;\n    }).catch(function (err) {\n      updateValidatorsMap(key, false, 1);\n      throw err;\n    });\n  });\n};\nexport var shouldRunAsyncValidator = function shouldRunAsyncValidator(validatorsMaps) {\n  return Object.keys(validatorsMaps).filter(function (key) {\n    return validatorsMaps[key].type === \"field\";\n  }).every(function (key) {\n    var _validatorsMaps$key2 = validatorsMaps[key],\n        isValid = _validatorsMaps$key2.isValid,\n        counter = _validatorsMaps$key2.counter;\n    return counter === 0 && !isValid || counter === 1 && isValid;\n  });\n};\nexport var flatAsyncValidationMap = function flatAsyncValidationMap(asyncInitMap) {\n  return Object.keys(asyncInitMap).reduce(function (acc, key) {\n    var target = asyncInitMap[key];\n\n    if (typeof target === \"function\") {\n      acc.push(target());\n    } else {\n      var funcs = flatAsyncValidationMap(target);\n      acc.push.apply(acc, funcs);\n    }\n\n    return acc;\n  }, []);\n};\nexport var fileList = function fileList(files) {\n  var fileList = [];\n\n  for (var i = 0, numFiles = files.length; i < numFiles; i++) {\n    fileList.push(files[i]);\n  }\n\n  return fileList;\n};","map":{"version":3,"names":["STATUS","FORM_VALIDATION_LABEL","createForm","state","isValid","status","READY","pristine","isSubmitting","submitAttempts","submitted","getValueByPath","path","obj","separator","properties","Array","isArray","split","reduce","prev","curr","isFormValid","validators","Object","keys","acc","key","value","isFormValidAsync","validatorsAsync","filter","type","every","_validatorsAsync$key","counter","generateAsynFuncs","validatorsMaps","updateValidatorsMap","_validatorsMaps$key","map","then","catch","err","shouldRunAsyncValidator","_validatorsMaps$key2","flatAsyncValidationMap","asyncInitMap","target","push","funcs","apply","fileList","files","i","numFiles","length"],"sources":["/home/micqdf/AlpacaPunchTests/maintest/test1/client/node_modules/usetheform/build/es/utils/formUtils.js"],"sourcesContent":["import { STATUS, FORM_VALIDATION_LABEL } from \"./constants\";\nexport var createForm = function createForm(state) {\n  if (state === void 0) {\n    state = {};\n  }\n\n  return {\n    state: state,\n    isValid: true,\n    status: STATUS.READY,\n    pristine: true,\n    isSubmitting: false,\n    submitAttempts: 0,\n    submitted: 0\n  };\n};\nexport var getValueByPath = function getValueByPath(path, obj, separator) {\n  if (separator === void 0) {\n    separator = \"/\";\n  }\n\n  if (path === FORM_VALIDATION_LABEL) {\n    return obj;\n  }\n\n  var properties = Array.isArray(path) ? path : path.split(separator);\n  return properties.reduce(function (prev, curr) {\n    return prev && prev[curr];\n  }, obj);\n};\nexport var isFormValid = function isFormValid(validators, state) {\n  return Object.keys(validators).reduce(function (acc, key) {\n    var value = getValueByPath(key, state);\n    return validators[key](value, state) && acc;\n  }, true);\n};\nexport var isFormValidAsync = function isFormValidAsync(validatorsAsync) {\n  return Object.keys(validatorsAsync).filter(function (key) {\n    return validatorsAsync[key].type === \"field\";\n  }).every(function (key) {\n    var _validatorsAsync$key = validatorsAsync[key],\n        counter = _validatorsAsync$key.counter,\n        isValid = _validatorsAsync$key.isValid;\n    return counter === 1 && isValid;\n  });\n};\nexport var generateAsynFuncs = function generateAsynFuncs(validators, validatorsMaps, state, updateValidatorsMap) {\n  return Object.keys(validators).filter(function (key) {\n    var _validatorsMaps$key = validatorsMaps[key],\n        type = _validatorsMaps$key.type,\n        isValid = _validatorsMaps$key.isValid,\n        counter = _validatorsMaps$key.counter;\n    return counter === 0 && !isValid && type === \"field\" || type === \"collection\";\n  }).map(function (key) {\n    var value = getValueByPath(key, state);\n    return validators[key](value, state).then(function (value) {\n      updateValidatorsMap(key, true, 1);\n      return value;\n    }).catch(function (err) {\n      updateValidatorsMap(key, false, 1);\n      throw err;\n    });\n  });\n};\nexport var shouldRunAsyncValidator = function shouldRunAsyncValidator(validatorsMaps) {\n  return Object.keys(validatorsMaps).filter(function (key) {\n    return validatorsMaps[key].type === \"field\";\n  }).every(function (key) {\n    var _validatorsMaps$key2 = validatorsMaps[key],\n        isValid = _validatorsMaps$key2.isValid,\n        counter = _validatorsMaps$key2.counter;\n    return counter === 0 && !isValid || counter === 1 && isValid;\n  });\n};\nexport var flatAsyncValidationMap = function flatAsyncValidationMap(asyncInitMap) {\n  return Object.keys(asyncInitMap).reduce(function (acc, key) {\n    var target = asyncInitMap[key];\n\n    if (typeof target === \"function\") {\n      acc.push(target());\n    } else {\n      var funcs = flatAsyncValidationMap(target);\n      acc.push.apply(acc, funcs);\n    }\n\n    return acc;\n  }, []);\n};\nexport var fileList = function fileList(files) {\n  var fileList = [];\n\n  for (var i = 0, numFiles = files.length; i < numFiles; i++) {\n    fileList.push(files[i]);\n  }\n\n  return fileList;\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}